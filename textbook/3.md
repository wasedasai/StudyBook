---
title: Basic Git & GitHub
id: 3
---

# Chapter3 Basic Git & GitHub
第三章では、GitとGitHubをインストールしながら、その基本を学習します。この章の最終ゴールは、早稲田祭2020のフロントエンドのコードをあなたのPCのVSCodeで閲覧できるようにすることです。

![chapter3-hero](https://user-images.githubusercontent.com/65198192/132161190-bfee5b90-4868-424c-bdea-fa2bd0da3231.png)
## 第一節 GitとGitHubとは
### 1.Git
Gitとはバージョン管理システムの一つです。私たちが「Gitについて」という記事を書きたい場合は、下記のようなファイル名でバージョンを管理するでしょう。
- 「『第1稿』Gitについて」
- 「『第2稿』Gitについて」
- 「『第3稿』Gitについて」
- 「『第4稿』Gitについて」

同様に、Gitはプログラムコードのバージョンを管理します。

:warning:Gitではバージョン管理のためにファイル名やフォルダ名を変更する必要はありません。

Gitは強力なバージョン管理システムです。100回変更した後に47回目のバージョンに完璧に戻すことができます。Gitはプログラマに様々なことを強制させますが、その恩恵は計り知れないです。


### 2.GitHub
Gitがローカルにあるバージョン管理システムであれば、GitHubはクラウドにあるバージョン管理システムです。イメージ的には、Driveの共有フォルダのようなものです。

GitHubは、Gitとほぼ同じ機能をクラウド上で使えるようにするだけでなく、プロジェクト管理などの機能も提供してくれます。

GitHubは素晴らしいツールですが、完璧ではありません。実際にプログラムを動作させることはGitHubでは基本的にはできず、ローカルでしかできません。

### 3.GitとGitHubのユースケース
ではどのようにGitとGitHubを使うのか説明しましょう。

1. GitHubからリポジトリをローカルにclone（複製）する。
    1. cloneとは、Driveにあるwordファイルをダウンロードするイメージです。
1. Branch（ブランチ）を切る。
    1. branchを切るとは、「version2」のような大きいバージョンを準備するイメージです。
1. ファイルを編集する。
1. ファイルをaddして、commit（コミット）する。
    1. commitするとは、「version2」の「version1」のように小さいバージョンに更新するイメージです。
    2. addするとは、複数のファイルを編集した際に、どのファイルの編集を次のバージョンに組み込むかを選択する作業です。
1. 3~4を繰り返す。
1. pushする。
    1. pushするとは、ブランチ（「version2」）をGitに送ることです。
1. GitHubでPullRequestする。
    1. PullRequestとは、校閲を頼むイメージです。
1. GitHubでMerge（マージ）する
    1. Mergeとは、「version2」を「version1」に組み込むイメージです。


## 第二節 GitHubのアカウント作成
[この記事](https://qiita.com/ayatokura/items/9eabb7ae20752e6dc79d)を読んで頑張ってください。

:warning:クレジットカードの情報を聞かれた場合は、偽サイトを訪問してるか選択を誤っている場合があるので、連絡してください。

## Gitのインストール
Progateが素晴らしい記事を用意してくれているので活用しましょう！
やるのは「Gitの初期設定」までで、GitHubの部分はやらなくていいです。というかできません。
- Windows: https://prog-8.com/docs/git-env-win
- Mac: https://prog-8.com/docs/git-env

:warning:素晴らしい記事と書きましたが、掲載情報が古いです。よく分からないことを聞かれた場合は、[この記事](https://www.curict.com/item/60/60bfe0e.html)から探して選択してください。

## 第三節 GitHubにSSH接続できるようにする
もう少しかみ砕いて表現すると、「**自分のPCとGitHubでのデータのやり取りに公開鍵暗号方式を用いるようにする**」ということです。
### 1.公開鍵暗号方式とは
#### 『公開鍵と秘密鍵』
公開鍵暗号方式を理解するために最も重要なことは、その効用を知ることです。

効用について説明する前に、公開鍵暗号方式には二つの鍵が登場するので、それについて説明しておきます。

:key:秘密鍵：自分だけが持つ鍵です。

:key:公開鍵：インターネット上で公開できる鍵です。秘密鍵から生成されます。

#### 『公開鍵暗号方式の効用とケース』
__:stars:「公開鍵で暗号化されたデータは秘密鍵でしか復号できない」__

この効用を用いることで、事前に公開鍵を配布して、自分にデータを送信する時に公開鍵で暗号化してもらうことで、自分とデータの送信元でしかデータを見れないようにすることができます。

__:stars:「秘密鍵で暗号化されたデータは、秘密鍵から生成された公開鍵によって、データが秘密鍵で暗号化されたか確認できる」__

この効用を用いることで、あなたが送信したデータを受け取った相手は、あなたが送信したかを確認することができます。
> これを『電子署名』と呼びます。
> 原理は以下のような流れです。（何となく理解できれば十分です。）
> 1. データと秘密鍵で暗号化・圧縮して生成したデータ（署名）を送信します。
> 2. 受信者は、データと暗号化・圧縮されたデータをアルゴリズムに従って比較します。
> 3. 同じであることを確認できれば、送信者があなたであることを証明することになります。

#### 『暗号の種類』
前項で暗号化という表現を用いたので、ここでは暗号について簡単に説明します。

暗号の種類は多岐にわたりますが、原則は「暗号化は容易だが、復号するのは答えを知らなければ大変」です。

代表的な暗号は、ブロックチェーンで有名なビットコインが用いているRSA暗号です。これは、「二つの素数を掛け合わせた数字を作るのは容易だが、掛け合わされた数学から二つの素数を見つけ出すのは大変」という素因数分解問題の困難さを用いた暗号です。

具体的には、877×881は簡単に掛け合わせられるけど、772637を素因数分解するのは、答えを知らなければ大変でしょう。

### 2.GitHubにSSH接続する。
WindowsユーザーはWindowsボタンを押して、「Git Bash」と入力して開きます。Macユーザーはターミナルを使いましょう。
> ターミナルやGit BashはCUIツールと呼ばれ、コマンドを入力してPCを操作するツールです。
> Windowsには`Powershell`や`command prompt`と呼ばれるものもありますが、基本的に`Git Bash`を使ってください。

> コマンドの左端に`$`がありますが無視してください。システムが出力するコマンドと区別するために使っています。

:one:まずはフォルダーの最上位階層（～）にいることを確認してください。デフォルトでは最上位層（～）にいると思います。
もしいなければ、次のコマンドで最上位層（～）に移動します。（Chage Directory）

:warning:先ほどもお伝えしましたが、コマンドの左端の`$`は無視してください。ここでは`cd ~`がコマンドとなります。

```bash
$ cd ~
```


:two:秘密鍵と公開鍵を保存するフォルダが存在するか確認するために次のコマンドを打ちます。（List Segments）
```bash
$ ls -al
```
> `-a`は`.`付きのフォルダやファイルを表示するためのオプションです。
> `-l`は詳細なデータを表示するためのオプションです。

`.ssh/`が一覧の中に存在していれば、3は飛ばしてください。デフォルトでは存在しません。


:three:秘密鍵と公開鍵を保存する`.ssh`フォルダを作る。（MaKe DIRectory）
```bash
$ mkdir .ssh
```
再度下のコマンドを実行して`.ssh`フォルダができたのか確認してください。ところでこのコマンドは2でも使いましたね。こういった時は、キーボードの:arrow_up:を押した分だけ、コマンドを再表示することができるので、ぜひ使ってみてください。
```bash
$ ls -al
```


:four:`.ssh`フォルダに移動する。SSHキーはデフォルトでは`.ssh/`フォルダで生成されますが、念のため移動します。
```bash
$ cd .ssh
```


:five:SSHキーを生成します。
```bash
$ ssh-keygen -t rsa
Enter file in which to save the key (/Users/(username)/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```
3回聞かれますがエンターして大丈夫です。

もう少し詳しく説明すると、最初の質問は「`~/.ssh`フォルダにある`id_rsa`にキーを保存していい？」です。その通りなのでエンター。次の質問は、「SSHキーを使うときのパスワードを入力してください」です。パスワードはいらないのでエンター。次の質問もパスワード確認用なので、エンター。

:warning:以前作成している場合は、「override?」みたいな質問が来ますのでご注意を。必要がなければ上書きしなくていいです。

:six:`ls -al`で`id_rsa`が作成されたことを確認してください。次に公開鍵をコピーします。

Mac
```bash
$ pbcopy < ~/.ssh/id_rsa.pub
```

Windows
```bash
$ clip < ~/.ssh/id_rsa.pub
```

:seven:公開鍵をGitHubにアップロードします。
1. https://github.com/settings/ssh を開きます。
2. 右上にある「Add SSH Key」と書かれた緑色のボタンをクリックします。
3. Titleに公開鍵名を入力します。どのようなものでも構いませんが自分で識別できるようにしましょう。
4. Keyにさきほどコピーした公開鍵をペーストしてください。
5. 最後に「Add Key」ボタンをクリックして登録してください。この時GitHubのパスワードを聞かれることがあります。
6. https://github.com/settings/ssh を再度開いて、公開鍵が登録されていることを確認します。

:seven:GitHubとの接続を確かめます。

:warning:途中で`Are you sure you want to continue connecting (yes/no)?`と聞かれる場合がありますが、`yes`を入力してください。
```bash
$ ssh -T git@github.com
Hi Akinori13! You've successfully authenticated, but GitHub does not provide shell access.
```

## 第四節 早稲田祭2020のフロントエンドのコードをクローン
### 1.クローン
1. https://github.com/wasedasai/os2020-front にアクセスします。アクセスできない場合はログインできていないか、早稲田祭チームに追加されてない場合です。チームリーダーに連絡してください。
2. 「Code」と書かれた緑色のボタンをクリックします。
3. HTTPSに赤線が引かれていると思いますが、その右にあるSSHをクリックしてください。
4. その下にあるURLをコピーします。右にあるクリップボードのアイコンをクリックすればコピーできます。
5. `cd ~`で最上位層に移動します。
6. `git clone <URL>`を実行します。`<URL>`は削除して、先ほどコピーしたものをペーストしてください。
7. 実行すると100%って表示されると思います。途中でUsernameとかPasswordを聞かれた場合は、チームに連絡を！

### 2.去年のソースコードを閲覧してみよう！
1. VSCodeを開きます
2. 左上のファイル→フォルダーを開くをクリック！
3. `os2020-front`をクリックして、フォルダーの選択をします。
4. src/pages/index.vueには2020年のフロントエンドのソースコードが書いてあります。

## お疲れ様！！
次回は去年のソースコードを実際にブラウザで見れるようにします。

![gif](https://media.giphy.com/media/3o7abB06u9bNzA8lu8/giphy.gif?cid=ecf05e47bhbdz7hr6xgdcp5nzgdokl0gbzm3qw4o1g6qsx5p&rid=giphy.gif&ct=g)

## 追記
注意点をいくつか書いておきます。
- どうしてもうまくいかない場合は、再起動したりGitを再インストールすることをお勧めします。
- 公開鍵認証のキーはとても長いので安全性が担保されており、UsernameとPasswordによる認証は短いので安全性が低いです。公開鍵認証の他に個人用アクセストークンというPasswordをとっても長くしたものを利用することもできます。SSHが難しそうであれば、それも一案です。
- `ssh-keygen -t rsa`は、本来は`ssh-keygen -t ed25519 -C "your_email@example.com"`や`ssh-keygen -t rsa -b 4096 -C "your_email@example.com"`を実行することを推奨されています。
- `ssh-keygen -t rsa`でパスワードを入力しませんでしたが、本来は入力すべきです。
- `ssh -T git@github.com`を実行したときに表示される`fingerprint`は、[ここ](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints)と同一であるかを本来は確認すべきです。

